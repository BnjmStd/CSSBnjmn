# Situaci√≥n Actual

Se desea acceder a un servidor Linux dentro de la red local mediante SSH desde Internet. El servidor tiene:

IP local: 192.168.1.27
Puerto SSH configurado: 4919
Internet WAN p√∫blica reportada: 186.5.236.254

# üåê Configuraci√≥n en el Router (Port Forwarding)

Se cre√≥ la siguiente regla de redirecci√≥n de puertos:

| Servicio | Puerto externo | Puerto interno | IP destino   | Protocolo |
| -------- | -------------- | -------------- | ------------ | --------- |
| SSH      | 4919           | 4919           | 192.168.1.27 | TCP       |

---

# El servidor confirma que el servicio SSH est√° activo en el puerto 4919:

```bash
sudo ss -tulpn | grep 4919
tcp LISTEN 0 128 0.0.0.0:4919
tcp LISTEN 0 128 [::]:4919
```

# Pruebas Externas con Nmap

```bash
nmap -p 4919 -Pn 186.5.236.254
```

```psql
Host is up.
PORT     STATE    SERVICE
4919/tcp filtered unknown
```

=> El estado filtered indica que el puerto:

- No est√° accesible desde Internet

- Est√° siendo bloqueado por un firewall intermedio

Esto puede deberse a:

üü• 1. El ISP bloquea puertos entrantes

Muchos proveedores residenciales no permiten recibir conexiones desde Internet, a menos que se pague IP p√∫blica desbloqueada.

üüß 2. El router tiene firewall adicional bloqueando el tr√°fico

Posibilidad menos probable, ya que la redirecci√≥n ya fue configurada correctamente.

üü® 3. Existe CG-NAT (Carrier Grade NAT)

Si la IP WAN del router no coincide con 186.5.236.254, entonces no hay IP p√∫blica real

entonces

# Bloqueo por Firewall/ISP Detectado

Al intentar acceder desde Internet mediante SSH:

```bash
ssh -p 4919 benja@186.5.236.254
```

La conexi√≥n falla con:

ssh: connect to host 186.5.236.254 port 4919: Connection timed out

Adem√°s, la IP p√∫blica tampoco responde a ICMP (ping):

ping 186.5.236.254

56 packets transmitted, 0 received, 100% packet loss

A pesar de disponer de una IP p√∫blica est√°tica, el puerto 4919 (y el ping) aparecen como ‚Äúfiltered‚Äù en Nmap, lo cual indica:

üõë Existe un firewall externo, probablemente del proveedor de Internet (ISP), bloqueando el acceso entrante.

=> No soy t√©cnico pero es lo que me he informado, tengo todo configurado como me solicitaron,

![alt text](image.png)

![alt text](image-1.png)

### resume

1Ô∏è‚É£ Qu√© tienes

Servidor interno (LAN)

IP: 192.168.1.27

SSH configurado en puerto: 4919

Firewall del servidor (UFW) permite conexiones en ese puerto ‚úÖ

Prueba interna (nc) funciona ‚Üí el servidor responde dentro de la LAN ‚úÖ

Router Tenda

LAN: 192.168.1.1

WAN: 10.239.88.2 (PPPoE)

IP p√∫blica visible en Internet: 186.5.236.254

Virtual Server / Port Forwarding configurado:

server: 4919 ‚Üí 4919 ‚Üí 192.168.1.27 ‚Üí TCP

server2: 443 ‚Üí 4919 ‚Üí 192.168.1.27 ‚Üí TCP

Bind Port: LAN1-LAN4 + SSID1 ‚úÖ

ISP

Afirman que tienes IP p√∫blica est√°tica y puertos abiertos ‚úÖ

2Ô∏è‚É£ Qu√© sucede

Pruebas externas (desde Internet o datos m√≥viles):

ssh -p 4919 usuario@186.5.236.254 ‚Üí timeout

ssh -p 443 usuario@186.5.236.254 ‚Üí timeout

Interpretaci√≥n:

Servidor y LAN funcionan ‚Üí el problema no est√° dentro de tu red local

Reglas de Virtual Server y Bind Port est√°n correctas ‚Üí el router deber√≠a reenviar el tr√°fico

Pero los paquetes no llegan al servidor desde Internet

3Ô∏è‚É£ Posibles causas

Firewall del router bloqueando tr√°fico WAN a puertos no est√°ndar

Aunque tengas port forwarding y Bind Port correctos, muchos routers Tenda bloquean tr√°fico externo a puertos altos o a 443 si no est√° expl√≠citamente habilitado.

NAT interno / PPPoE / IP privada del router

Tu router tiene IP WAN 10.x.x.x, aunque el ISP dice que la IP p√∫blica est√° abierta. Puede haber NAT interno que impide la conexi√≥n.

Prueba desde dentro de la LAN no funciona

NAT loopback no permite probar usando la IP p√∫blica desde la misma red, pero tus pruebas con datos m√≥viles confirman que el tr√°fico WAN no llega.

4Ô∏è‚É£ Conclusi√≥n resumida

Todo interno funciona ‚úÖ

Port forwarding y Bind Port est√°n correctos ‚úÖ

Tr√°fico externo no llega al servidor ‚ùå

Causas m√°s probables: firewall del router o NAT interno (no es el servidor ni UFW)


# 

sudo ufw status

```
nc -vz 192.168.1.27 4919
# Output: succeeded!
```

estoy dentro de un cgnat cgnat