<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scroll Animation Sections</title>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/Physics2DPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>

    <style>
      :root {
        --bg: #030303;
        --ink: #f3f3f3;
        --accent: #c3ff00;
      }

      *,
      *::after,
      *::before {
        box-sizing: border-box;
      }

      html,
      body {
        min-block-size: 100vh;
        scroll-behavior: smooth;
      }

      body {
        margin: 0;
        background: var(--bg);
        color: var(--ink);
      }

      .hero {
        min-block-size: 100vh;
        display: grid;
        place-items: center;
        padding: 4vw;
        overflow: hidden;
        background-image: linear-gradient(
          rgba(255, 255, 255, 0.05) 2px,
          transparent 2px
        );
      }

      .hero__title {
        font-size: clamp(3rem, 10vw, 10rem);
        line-height: 1;
        font-weight: 900;
        text-transform: uppercase;
        text-align: center;
        letter-spacing: -0.02em;
        color: var(--ink);
      }

      .hero__title > span {
        display: block;
      }

      .accent {
        color: var(--accent);
      }

      .blast-char {
        display: inline-block;
        line-height: 1;
        will-change: transform, opacity;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>

    <script>
      gsap.registerPlugin(ScrollTrigger, Physics2DPlugin, SplitText);

      const HERO_LINES = [
        { pre: "This brand is about to", highlight: "ignite", post: "your world." },
        { pre: "Turn your ideas into", highlight: "impact", post: "that lasts." },
        { pre: "Experience the power of", highlight: "innovation", post: "in motion." },
        { pre: "We don’t follow trends — we", highlight: "create", post: "them." },
      ];

      const $container = document.getElementById("container");

      // Crear una sección por cada línea
      HERO_LINES.forEach((line, i) => {
        const section = document.createElement("section");
        section.classList.add("hero");
        section.innerHTML = `
          <h1 class="hero__title" id="title-${i}">
            <span>${line.pre} <span class="accent" id="split-${i}">${line.highlight}</span> ${line.post}</span>
          </h1>
        `;
        $container.appendChild(section);
      });

      // Función de animación
      function animateSplitText(titleEl, highlightEl) {
        const sentenceSplit = new SplitText(titleEl, {
          type: "chars, words, lines",
          linesClass: "lines",
          wordClass: "words",
          charClass: "char",
        });

        const highlightSplit = new SplitText(highlightEl, {
          type: "chars",
          charsClass: "blast-char",
        });

        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: titleEl,
            start: "top 80%", // cuando entra en vista
            toggleActions: "play none none reverse", // animar cuando entra, revertir al salir
          },
        });

        tl.from(sentenceSplit.words, {
          y: -100,
          opacity: 0,
          rotation: "random(-80, 90)",
          duration: 0.7,
          ease: "back",
          stagger: 0.1,
        })
          .to(highlightSplit.chars, {
            duration: 2.2,
            opacity: 0,
            rotation: "random(-2000, 2000)",
            physics2D: {
              angle: "random(240, 320)",
              velocity: "random(300, 600)",
              gravity: 800,
            },
            stagger: 0.05,
            delay: 1.5,
          })
          .to(sentenceSplit.words, {
            y: 100,
            opacity: 0,
            rotation: "random(-80, -90)",
            duration: 0.7,
            ease: "back",
            stagger: 0.1,
            delay: 1.5,
          })
          .call(() => {
            sentenceSplit.revert();
            highlightSplit.revert();
          });
      }

      // Inicializar animación para cada sección
      HERO_LINES.forEach((_, i) => {
        const titleEl = document.getElementById(`title-${i}`);
        const highlightEl = document.getElementById(`split-${i}`);
        animateSplitText(titleEl, highlightEl);
      });
    </script>
  </body>
</html>
